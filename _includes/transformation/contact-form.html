<!-- Contact Form Section -->
<section class="tj-contact" style="padding: 4rem 2rem;">
  <div class="container" style="max-width: 800px; margin: 0 auto;">

    <!-- Header -->
    <div class="tj-contact__header" style="text-align: center; margin-bottom: 3rem;">
      <h1 style="color: var(--color-primary, #f1c232); font-size: 2.5rem; margin-bottom: 1rem;">
        {% t pages.contact.header %}
      </h1>
      <p style="font-size: 1.25rem; color: #ccc;">
        {% t pages.contact.subtext %}
      </p>
    </div>

    <!-- Contact Form - Formspree -->
    <form
      id="contact-form"
      action="https://formspree.io/f/xgejkpjy"
      method="POST"
      class="tj-contact__form"
      style="background-color: #3a3a3a; padding: 2rem; border-radius: 8px;"
    >

      <!-- Name -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="name" style="display: block; margin-bottom: 0.5rem; color: #f0f0f0; font-weight: 500;">
          {% t pages.contact.form.name %} *
        </label>
        <input
          type="text"
          id="name"
          name="name"
          required
          style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #555; border-radius: 4px; background-color: #2c2c2c; color: #f0f0f0; font-size: 1rem;"
        >
      </div>

      <!-- Email -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="email" style="display: block; margin-bottom: 0.5rem; color: #f0f0f0; font-weight: 500;">
          {% t pages.contact.form.email %} *
        </label>
        <input
          type="email"
          id="email"
          name="email"
          required
          style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #555; border-radius: 4px; background-color: #2c2c2c; color: #f0f0f0; font-size: 1rem;"
        >
      </div>

      <!-- Company (optional) -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="company" style="display: block; margin-bottom: 0.5rem; color: #f0f0f0; font-weight: 500;">
          {% t pages.contact.form.company %}
        </label>
        <input
          type="text"
          id="company"
          name="company"
          style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #555; border-radius: 4px; background-color: #2c2c2c; color: #f0f0f0; font-size: 1rem;"
        >
      </div>

      <!-- Service Selection -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="service" style="display: block; margin-bottom: 0.5rem; color: #f0f0f0; font-weight: 500;">
          {% t pages.contact.form.service %}
        </label>
        <select
          id="service"
          name="service"
          style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #555; border-radius: 4px; background-color: #2c2c2c; color: #f0f0f0; font-size: 1rem;"
        >
          <option value="general">{% t pages.contact.form.services.general %}</option>
          <option value="workshop">{% t pages.contact.form.services.workshop %}</option>
          <option value="pi-planning">{% t pages.contact.form.services.pi_planning %}</option>
          <option value="proposal">{% t pages.contact.form.services.proposal %}</option>
        </select>
      </div>

      <!-- Message -->
      <div class="form-group" style="margin-bottom: 1.5rem;">
        <label for="message" style="display: block; margin-bottom: 0.5rem; color: #f0f0f0; font-weight: 500;">
          {% t pages.contact.form.message %} *
        </label>
        <textarea
          id="message"
          name="message"
          rows="5"
          required
          style="width: 100%; padding: 0.75rem 1rem; border: 1px solid #555; border-radius: 4px; background-color: #2c2c2c; color: #f0f0f0; font-size: 1rem; resize: vertical;"
        ></textarea>
      </div>

      <!-- Hidden field for redirect -->
      <input type="hidden" name="_next" value="{{ site.baseurl }}/kontakt/?success=true">

      <!-- Submit Button -->
      <div class="form-group" style="text-align: center;">
        <button
          type="submit"
          class="btn btn-primary btn-lg"
          style="padding: 1rem 2.5rem; font-size: 1.1rem; background-color: var(--color-primary, #f1c232); color: #000; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; transition: all 0.2s;"
        >
          {% t pages.contact.form.submit %}
        </button>
      </div>
    </form>

    <!-- Success Message (shown via URL parameter) -->
    <div id="success-message" style="display: none; background-color: #28a745; color: white; padding: 1.5rem; border-radius: 8px; text-align: center; margin-top: 2rem;">
      <h3 style="margin-bottom: 0.5rem;">{% t pages.contact.form.success_title %}</h3>
      <p style="margin: 0;">{% t pages.contact.form.success_message %}</p>
    </div>

    <!-- Alternative Contact -->
    <div class="tj-contact__alternative" style="text-align: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #444;">
      <p style="color: #999; margin-bottom: 1rem;">{% t pages.contact.alternative %}</p>
      <a href="mailto:info@bumbleflies.de" style="color: var(--color-primary, #f1c232); font-size: 1.25rem; text-decoration: none;">
        info@bumbleflies.de
      </a>
    </div>

  </div>
</section>

<!-- Query Parameter Handler -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const urlParams = new URLSearchParams(window.location.search);

  // Pre-select service from query parameter
  const service = urlParams.get('service');
  if (service) {
    const serviceSelect = document.getElementById('service');
    if (serviceSelect) {
      serviceSelect.value = service;
    }
  }

  // Show success message
  const success = urlParams.get('success');
  if (success === 'true') {
    const successMessage = document.getElementById('success-message');
    const contactForm = document.getElementById('contact-form');
    if (successMessage) {
      successMessage.style.display = 'block';
    }
    if (contactForm) {
      contactForm.style.display = 'none';
    }
  }
});
</script>
